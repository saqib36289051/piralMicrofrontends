var piralNotifications=(()=>{var E=Object.create;var p=Object.defineProperty;var I=Object.getOwnPropertyDescriptor;var w=Object.getOwnPropertyNames;var D=Object.getPrototypeOf,B=Object.prototype.hasOwnProperty;var O=t=>p(t,"__esModule",{value:!0});var r=(t=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(t,{get:(o,i)=>(typeof require!="undefined"?require:o)[i]}):t)(function(t){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+t+'" is not supported')});var g=(t,o)=>{O(t);for(var i in o)p(t,i,{get:o[i],enumerable:!0})},F=(t,o,i)=>{if(o&&typeof o=="object"||typeof o=="function")for(let n of w(o))!B.call(t,n)&&n!=="default"&&p(t,n,{get:()=>o[n],enumerable:!(i=I(o,n))||i.enumerable});return t},c=t=>F(O(p(t!=null?E(D(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var q={};g(q,{Notifications:()=>N,PiralNotificationsHost:()=>d,PiralNotificationsToast:()=>y,createNotificationsApi:()=>j});var u={};g(u,{closeNotification:()=>v,openNotification:()=>k});var l=c(r("piral-core"));function k(t,o){t.dispatch(i=>({...i,notifications:(0,l.prependItem)(i.notifications,o)}))}function v(t,o){t.dispatch(i=>({...i,notifications:(0,l.excludeOn)(i.notifications,n=>n.id===o.id)}))}var x=c(r("react")),f=c(r("piral-core"));var T=c(r("react")),b=c(r("piral-core")),h=t=>T.createElement("div",{className:"piral-notifications-host",key:"default_notifications"},t.children),R=({children:t})=>(0,b.defaultRender)(t);var m=c(r("react")),A=c(r("piral-core"));var C=c(r("piral-core")),d=(0,C.getPiralComponent)("NotificationsHost"),y=(0,C.getPiralComponent)("NotificationsToast");var N=()=>{let t=(0,A.useGlobalState)(o=>o.notifications);return m.createElement(d,null,t.map(({component:o,close:i,options:n,id:a})=>m.createElement(y,{onClose:i,options:n,key:a},m.createElement(o,{onClose:i,options:n}))))};N.displayName="Notifications";function $(t){return(0,x.isValidElement)(t)}function M(t){if(typeof t=="string"){let o=t;return()=>(0,f.defaultRender)(o)}else if((0,x.isValidElement)(t)){let o=t;return()=>o}return t}function G(t,o,i,n,a={}){let s={...n,...a},e={id:o,component:M(i),options:s,close(){setTimeout(()=>t.closeNotification(e),0)}};return typeof s.autoClose=="number"&&s.autoClose>0&&setTimeout(e.close,s.autoClose),e}function V(t,o,i){let n=[],a=0;for(let{content:s,options:e}of o)n.push(G(t,`global-${a++}`,s,i,e));return n}function _(t){return o=>({...o,components:{NotificationsHost:h,NotificationsToast:R,...o.components},notifications:t})}function j(t={}){let{defaultOptions:o={},selectId:i=()=>`${~~(Math.random()*1e4)}`,messages:n=[]}=t;return a=>(a.defineActions(u),a.dispatch((0,f.withAll)(_(V(a,n,o)),(0,f.withRootExtension)("piral-notifications",N))),s=>({showNotification(e,S){let H=typeof e=="string"||$(e)?e:(0,f.withApi)(a,e,s,"extension"),P=G(a,i(),H,o,S);return a.openNotification(P),P.close}}))}return q;})();
